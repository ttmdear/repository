# vi:syntax=bash

# Polecenie ma dosyć sporo różnych zastosowań. Dalej omówimy większość z nich.
# Ustawienie hasła dla konta użytkownika
# Składnia polecenia:
#
# passwd [nazwauzytkownika]
#
# Dla zwykłego użytkownika dostępna jest składnia bez parametru, która pozwala na zmianę hasła aktualnie zalogowane użytkownika. Użytkownik root może dodatkowo podać jako parametr użytkownika, którego chce ustawić hasła. Jeszcze jedną różnicą jest to, że zwykły użytkownik musi w procesie zmiany hasła wykazać się znajomością dotychczasowego hasła, natomiast użytkownik root po prostu ustawia hasło bez konieczności podawania dotychczasowego.
#
# # Ustawienie informacji o użytkowniku
# Składnia polecenia:
#
# passwd -f [nazwaużytkownika]
#
# Polecenie pozwala na ustawienie wartości pola GECOS w pliku passwd. Dostępność opcji nazwauzytkownika jest analogiczna jak w poprzednim użyciu. Format danych jest z kolei taki jak omówiony przy okazji struktury pliku /etc/passwd. Ten sam efekt co powyższym poleceniem można także uzyskać poleceniem chfn
#
# # Sterowanie dostępnością konta
# Składnia polecenia:
#
# passwd {-l | -u | -d | -e} nazwauzytkownika
#
# Znaczenie opcji:
# -l — blokowanie konta,
# -u — odblokowanie konta,
# -d — usunięcie hasła,
# -e — ustawienie konta tak, żeby użytkownik musiał zmienić hasło przy kolejnym logowaniu.
#
# Jak można się domyślić, ta składnia jest dostępna tylko dla administratora. W tym miejscu warto dodać, że polecenie operuje na pliku shadow i wykonanie polecenia z każdą opcją powoduje pewną modyfikację tego pliku. Zachęcam do zbadania, jakie zmiany mają miejsce w przypadku kolejnych opcji.
#
# # Konfiguracja parametrów hasła
# Składnia polecenia:
#
# passwd [-n min] [-x max] [-w warn] [-i inactive] nazwauzytkownika
#
# Znaczenie opcji jest takie samo, jak to umówione w kontekście pliku shadow. Proszę zwrócić uwagę, że te opcje dokładnie odpowiadają poszczególnym kolumnom pliku shadow, stąd zrozumienie struktury tego pliku sprawia, że czytelnik bez problemu poradzi sobie z użyciem tego polecenia.
#
# # Pobieranie informacji o kontach
# Składnia polecenia:
#
# passwd -S [-a | nazwauzytkownika]
#
# Znaczenie opcji
# nazwauzytkownika — wyświetlenie informacji o koncie użytkownika nazwauzytkownika
# -a — wyświetlenie informacji o wszystkich kontach
#
# Dla zwykłego użytkownika dostępne jest polecenie tylko z opcją -S, które wydrukuje informacje o aktualnie zalogowanym użytkowniku, natomiast pozostałe opcje są, oczywiście, dostępne dla użytkownika root.
#
# Ponieważ wynik działania tego polecenia może nie być oczywisty, krótko go umówimy. Przykładowy wydruk:
#
# $ passwd -S gucio
# gucio PS 10/19/2008 0 99999 7 -1
#
# Pierwsza kolumna to oczywiście nazwa konta. Kolejna to stan konta. Mamy następujące wartości:
#  PS — użytkownik ma hasło i może się logować
#  LK — konto jest zablokowane
#  NP — użytkownik nie ma hasła\
#
# Dalsze kolumny ponownie odpowiadają kolumnom z pliku shadow: data ostatniej
# zmiany hasła i okresy min, max, warn oraz inactive.
